# ========================================
# MemoVault 生产环境配置模板
# ========================================
# 
# 使用方法：
# 1. 复制此文件为 .env.local
# 2. 填入你的实际配置值
# 3. 不要将 .env.local 提交到 Git
#
# ========================================

# ========================================
# 数据库配置
# ========================================

# PostgreSQL 数据库连接字符串
# 格式：postgresql://user:password@host:port/database?schema=public
# 
# 示例：
# - Vercel Postgres: postgresql://user:password@ep-xxx.aws-us-east-1.pooler.supabase.com:6543/postgres
# - AWS RDS: postgresql://user:password@db-xxx.rds.amazonaws.com:5432/memovault
# - Railway: postgresql://postgres:password@containers-us-west-xxx.railway.app:6543/railway
DATABASE_URL="postgresql://user:password@host:port/database?schema=public"

# ========================================
# JWT 认证配置
# ========================================

# JWT 密钥（必须使用强随机字符串，至少 32 字符）
# 
# 生成方法：
# - Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# - Python: python -c "import secrets; print(secrets.token_hex(32))"
# - 在线工具: https://www.random.org/strings/
# 
# ⚠️ 重要：生产环境必须使用强随机密钥！
JWT_SECRET="your-super-secret-key-change-in-production-12345678"

# ========================================
# WebSocket 配置
# ========================================

# WebSocket 服务器端口（服务器端）
WS_PORT=3001

# 客户端 WebSocket URL（暴露给浏览器）
# 
# 开发环境：ws://localhost:3001
# 生产环境：wss://your-domain.com 或 wss://your-app.vercel.app
NEXT_PUBLIC_WS_URL="wss://ycoming.top"

# ========================================
# S3/MinIO/R2 文件存储配置
# ========================================

# S3 端点 URL
# 
# 示例：
# - AWS S3: https://s3.amazonaws.com
# - MinIO: http://localhost:9000
# - Cloudflare R2: https://<account-id>.r2.cloudflarestorage.com
# - 阿里云 OSS: https://your-endpoint.oss-cn-hangzhou.aliyuncs.com
S3_ENDPOINT="https://your-s3-endpoint.com"

# S3 访问密钥 ID
S3_ACCESS_KEY="your-access-key"

# S3 访问密钥 Secret
S3_SECRET_KEY="your-secret-key"

# S3 存储桶名称
S3_BUCKET="memovault-blobs"

# S3 区域
# 
# 示例：
# - AWS: us-east-1, us-west-2, eu-west-1
# - MinIO: us-east-1
# - 阿里云: oss-cn-hangzhou
S3_REGION="us-east-1"

# ========================================
# Node.js 环境
# ========================================

# Node 环境
# 
# 开发环境：development
# 生产环境：production
NODE_ENV="production"

# ========================================
# Next.js 配置
# ========================================

# Next.js 应用端口
PORT=3000

# ========================================
# CORS 配置（可选）
# ========================================

# 允许的来源（CORS）
# 
# 示例：
# - 单个域名：https://your-domain.com
# - 多个域名：https://your-domain.com,https://app.your-domain.com
# - 开发环境：http://localhost:3000
CORS_ORIGIN="https://ycoming.top"

# ========================================
# 会话配置（可选）
# ========================================

# 会话密钥（用于会话加密）
# 
# 生成方法与 JWT_SECRET 相同
SESSION_SECRET="your-session-secret-change-in-production"

# ========================================
# 日志配置（可选）
# ========================================

# 日志级别
# 
# 选项：error, warn, info, debug
LOG_LEVEL="info"

# ========================================
# 速率限制配置（可选）
# ========================================

# API 请求速率限制（每分钟请求数）
RATE_LIMIT_MAX=60

# WebSocket 连接速率限制（每分钟连接数）
WS_RATE_LIMIT_MAX=30

# ========================================
# 备份配置（可选）
# ========================================

# 自动备份间隔（小时）
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# ========================================
# 邮件配置（可选，用于通知）
# ========================================

# SMTP 服务器地址
SMTP_HOST="smtp.gmail.com"

# SMTP 服务器端口
SMTP_PORT=587

# SMTP 用户名
SMTP_USER="your-email@gmail.com"

# SMTP 密码
SMTP_PASSWORD="your-app-password"

# 发件人地址
SMTP_FROM="noreply@your-domain.com"

# ========================================
# 第三方服务配置（可选）
# ========================================

# Google Analytics ID
NEXT_PUBLIC_GA_ID=""

# Sentry DSN（错误追踪）
NEXT_PUBLIC_SENTRY_DSN=""

# ========================================
# 功能开关（可选）
# ========================================

# 启用知识图谱
ENABLE_GRAPH=true

# 启用向量搜索
ENABLE_VECTOR_SEARCH=true

# 启用文件上传
ENABLE_FILE_UPLOAD=true

# 启用实时同步
ENABLE_SYNC=true

# ========================================
# 安全配置（可选）
# ========================================

# 启用 HTTPS 强制重定向
FORCE_HTTPS=true

# 启用 CSP（内容安全策略）
ENABLE_CSP=true

# 启用 HSTS（HTTP 严格传输安全）
ENABLE_HSTS=true

# ========================================
# 性能配置（可选）
# ========================================

# 最大文件上传大小（MB）
MAX_FILE_SIZE=10

# 最大笔记长度（字符）
MAX_NOTE_LENGTH=100000

# 最大搜索结果数
MAX_SEARCH_RESULTS=50

# ========================================
# 开发/调试配置（仅开发环境）
# ========================================

# 启用调试模式（生产环境必须设为 false）
DEBUG=false

# 启用详细日志（生产环境必须设为 false）
VERBOSE=false

# ========================================
# 注意事项
# ========================================
#
# 1. 不要将 .env.local 提交到 Git
# 2. 生产环境必须使用强随机密钥
# 3. 定期轮换密钥和密码
# 4. 使用环境变量管理工具（如 Vercel、AWS Secrets Manager）
# 5. 定期备份配置文件
# 6. 监控环境变量使用情况
#
# ========================================
